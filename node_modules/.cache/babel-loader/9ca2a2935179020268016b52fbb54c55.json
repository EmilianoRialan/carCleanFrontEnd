{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\Desktop\\\\proyecto car clean 01 09 2021\\\\proyecto\\\\src\\\\components\\\\Agenda\\\\ListarAgenda.js\";\nimport React, { Component } from 'react';\nimport * as ReactBoostrap from 'react-bootstrap';\nimport axios from 'axios';\nimport { url } from '../API.js';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ListarAgenda extends Component {\n  constructor() {\n    super();\n\n    this.onChangeDescription = e => {\n      console.log(e.target.value);\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.verTareas = serId => {\n      console.log(serId);\n      axios.post(url + '/tareaAgendada/listasTareasServicio/?id=' + serId).then(resp => {\n        console.log(resp.data);\n        this.setState({\n          tareas: resp.data,\n          estaCliqueado: true,\n          idServicio: serId\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.iniciarAlServicio = e => {\n      console.log(this.state.idServicio);\n      axios.post(url + '/servicioAgendado/iniciarServicioAgendado/?id=' + this.state.idServicio).then(resp => {\n        console.log(resp.data);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n          this.componentDidMount();\n        }\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n      });\n    };\n\n    this.finalizarAlServicio = e => {\n      console.log(this.state.idServicio);\n      axios.post(url + '/servicioAgendado/finalizarServicioAgendado/?id=' + this.state.idServicio).then(resp => {\n        console.log(resp.data);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n          this.componentDidMount();\n          this.verTareas(this.state.idServicio);\n          this.finalizarNotificacion();\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.iniciarTarea = tarId => {\n      console.log(tarId);\n      axios.post(url + '/tareaAgendada/iniciarTarea/?id=' + tarId).then(resp => {\n        console.log(resp);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            estaInciado: true,\n            //boolean esta iniciado\n            btnIniciar: true,\n            btnFinalizar: false,\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n          this.verTareas(this.state.idServicio);\n          this.iniciarAlServicio();\n          this.iniciarNotificacion(); //al iniciar la tarea cambiar el estado al servicio a que esta en proceso\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.finalizarTarea = tarId => {\n      console.log(tarId);\n      axios.post(url + '/tareaAgendada/finalizarTarea/?id=' + tarId).then(resp => {\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            estaInciado: false,\n            btnFinalizar: true,\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n        }\n\n        this.verTareas(this.state.idServicio);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.iniciarNotificacion = () => {\n      console.log(localStorage.getItem('usuario'));\n      console.log(this.state.idServicio);\n      axios.post(url + '/notificacion/iniciarNotificacion/?idUsu=' + localStorage.getItem('usuario') + \"&idSerAge=\" + this.state.idServicio).then(resp => {\n        console.log(resp.data);\n        this.setState({});\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.finalizarNotificacion = () => {\n      axios.post(url + '/notificacion/finalizarNotificacion/?idUsu=' + localStorage.getItem('usuario') + \"&idSerAge=\" + this.state.idServicio + \"&descripcion=\" + this.state.description).then(resp => {\n        console.log(resp.data);\n        this.setState({});\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.componentDidMount = () => {\n      axios.get(url + '/servicioAgendado/listarActivos').then(resp => {\n        console.log(resp.data);\n        this.setState({\n          serviciosAgendados: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      console.log(localStorage.getItem(\"usuario\"));\n      let id = 0;\n      axios.get(url + '/usuario/buscarPorId/?id=' + id).then(resp => {\n        this.setState({\n          usuario: resp.data\n        });\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response,\n          mensajeError: \"error\"\n        });\n        console.log(error);\n      });\n    };\n\n    this.manejadorOnChange = e => {\n      this.setState({\n        searchTerm: e.target.value\n      });\n    };\n\n    this.state = {\n      serviciosAgendados: [],\n      log: \"\",\n      mensaje: \"\",\n      date: new Date(),\n      tareas: [],\n      estaCliqueado: false,\n      estaIniciado: false,\n      notificacion: {},\n      idServicio: \"\",\n      description: \"\",\n      idCli: 1,\n      searchTerm: \"\",\n      usuario: [],\n      fechaVacia: \"VACIA\",\n      btnIniciar: false,\n      //verdadero esta deshabilitado y falso esta habilitado\n      btnFinalizar: true,\n      mensajeError: \"\",\n      mensajeSuccess: \"\"\n    };\n    this.verTareas.bind();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  limpiar() {\n    this.timer = setInterval(() => {\n      window.location.reload(1);\n      this.setState({\n        mensajeError: \"\",\n        mensajeSuccess: \"\"\n      });\n    }, 5000);\n  }\n\n  btnIniciar(id) {\n    const val = id; //retornar un booleano\n\n    return val;\n  }\n\n  btnFinalizar(id) {\n    const val = id; //retornar un booleano\n\n    return val;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Lista Agenda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Buscar por estado nombre\",\n        onChange: this.manejadorOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactBoostrap.Table, {\n        className: \"table \",\n        hover: true,\n        variant: \"light-dark\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Estado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Fecha Elegida\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Fecha Registro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Id Servicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.serviciosAgendados.filter(elemento => elemento.estado.nombre.toLowerCase().includes(this.state.searchTerm.toLowerCase())).map(e => /*#__PURE__*/_jsxDEV(\"tr\", {\n            value: e,\n            id: e.id,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.estado.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.fechaElegida.substring(0, [10])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.fechaRegistro.substring(0, [10])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.servicio.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"button\",\n                  onClick: this.verTareas.bind(this, e.id),\n                  children: \"Ver tareas\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 21\n            }, this)]\n          }, e.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactBoostrap.Table, {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Tarea nombre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Tarea descripcion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Estado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [this.state.estaCliqueado === true ? this.state.tareas.map(e => /*#__PURE__*/_jsxDEV(\"tr\", {\n            value: e,\n            id: e.id,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.tarea.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.tarea.descripcion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.estado.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"button\",\n                  disabled: e.estado.nombre !== \"EN ESPERA DE COMIENZO\" && e.estado.nombre === \"FINALIZADO\" || e.estado.nombre === \"COMENZADA\",\n                  onClick: this.iniciarTarea.bind(this, e.id),\n                  children: \"Iniciar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"button\",\n                  disabled: e.estado.nombre !== \"COMENZADA\" && e.estado.nombre === \"EN ESPERA DE COMIENZO\" || e.estado.nombre === \"FINALIZADO\",\n                  onClick: this.finalizarTarea.bind(this, e.id),\n                  children: \"Finalizar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 19\n            }, this)]\n          }, e.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 17\n          }, this)) : null, /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"description\",\n            placeholder: \"Ingrese una descripci\\xF3n\",\n            onChange: this.onChangeDescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"secondary\",\n            onClick: this.finalizarAlServicio,\n            children: \"Finalizar Servicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), this.state.mensajeSuccess === \"ok\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-success\",\n        role: \"alert\",\n        children: this.state.mensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this) : this.state.mensajeError === \"error\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-danger\",\n        role: \"alert\",\n        children: this.state.mensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 13\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/emili/Desktop/proyecto car clean 01 09 2021/proyecto/src/components/Agenda/ListarAgenda.js"],"names":["React","Component","ReactBoostrap","axios","url","Button","ButtonGroup","ListarAgenda","constructor","onChangeDescription","e","console","log","target","value","setState","description","verTareas","serId","post","then","resp","data","tareas","estaCliqueado","idServicio","catch","error","iniciarAlServicio","state","status","mensaje","mensajeSuccess","componentDidMount","response","mensajeError","finalizarAlServicio","finalizarNotificacion","iniciarTarea","tarId","estaInciado","btnIniciar","btnFinalizar","iniciarNotificacion","finalizarTarea","localStorage","getItem","get","serviciosAgendados","id","usuario","manejadorOnChange","searchTerm","date","Date","estaIniciado","notificacion","idCli","fechaVacia","bind","componentWillUnmount","clearInterval","timer","limpiar","setInterval","window","location","reload","val","render","filter","elemento","estado","nombre","toLowerCase","includes","map","fechaElegida","substring","fechaRegistro","servicio","tarea","descripcion"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as ReactBoostrap from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport { url } from '../API.js';\r\nimport Button from 'react-bootstrap/Button'\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\n\r\n\r\n\r\nexport default class ListarAgenda extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      serviciosAgendados: [],\r\n      log: \"\",\r\n      mensaje: \"\",\r\n      date: new Date(),\r\n      tareas: [],\r\n      estaCliqueado: false,\r\n      estaIniciado: false,\r\n      notificacion: {},\r\n      idServicio: \"\",\r\n      description: \"\",\r\n      idCli: 1,\r\n      searchTerm: \"\",\r\n      usuario: [],\r\n      fechaVacia: \"VACIA\",\r\n      btnIniciar: false,//verdadero esta deshabilitado y falso esta habilitado\r\n      btnFinalizar: true,\r\n      mensajeError: \"\",\r\n      mensajeSuccess: \"\",\r\n    }\r\n    this.verTareas.bind();\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer);\r\n}\r\nlimpiar() {\r\n    this.timer = setInterval(() => {\r\n        window.location.reload(1);\r\n        this.setState({\r\n          mensajeError:\"\",\r\n          mensajeSuccess:\"\",\r\n        });\r\n    }\r\n        , 5000);\r\n}\r\n  onChangeDescription = e => {\r\n    console.log(e.target.value);\r\n    this.setState({\r\n      description: e.target.value,\r\n    })\r\n  }\r\n\r\n  verTareas = (serId) => {\r\n    console.log(serId);\r\n    axios.post(url + '/tareaAgendada/listasTareasServicio/?id=' + serId).then((resp) => {\r\n      console.log(resp.data);\r\n      this.setState({\r\n        tareas: resp.data,\r\n        estaCliqueado: true,\r\n        idServicio: serId,\r\n      });\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    }\r\n    )\r\n  }\r\n  iniciarAlServicio = e => {\r\n    console.log(this.state.idServicio)\r\n    axios.post(url + '/servicioAgendado/iniciarServicioAgendado/?id=' + this.state.idServicio).then((resp) => {\r\n      console.log(resp.data);\r\n      if (resp.status >= 200 && resp.status <= 205) {\r\n        this.setState({\r\n          mensaje: resp.data,\r\n          mensajeSuccess: \"ok\",\r\n        });\r\n        this.componentDidMount();\r\n\r\n      }\r\n    }).catch((error) => {\r\n      this.setState({\r\n        mensaje: error.response.data,\r\n        mensajeError: \"error\"\r\n      });\r\n    }\r\n    )\r\n  }\r\n  finalizarAlServicio = e => {\r\n    console.log(this.state.idServicio)\r\n    axios.post(url + '/servicioAgendado/finalizarServicioAgendado/?id=' + this.state.idServicio).then((resp) => {\r\n      console.log(resp.data);\r\n      if (resp.status >= 200 && resp.status <= 205) {\r\n        this.setState({\r\n          mensaje: resp.data,\r\n          mensajeSuccess: \"ok\",\r\n        });\r\n        this.componentDidMount();\r\n        this.verTareas(this.state.idServicio);\r\n        this.finalizarNotificacion();\r\n      }\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    }\r\n    )\r\n  }\r\n  iniciarTarea = (tarId) => {\r\n    console.log(tarId);\r\n    axios.post(url + '/tareaAgendada/iniciarTarea/?id=' + tarId).then((resp) => {\r\n      console.log(resp);\r\n      if  (resp.status >= 200 && resp.status <= 205)  {\r\n        this.setState({\r\n          estaInciado: true,  //boolean esta iniciado\r\n          btnIniciar: true,\r\n          btnFinalizar: false,\r\n            mensaje: resp.data,\r\n            mensajeSuccess: \"ok\",\r\n         \r\n        });\r\n        this.verTareas(this.state.idServicio);\r\n        this.iniciarAlServicio();\r\n        this.iniciarNotificacion();\r\n        //al iniciar la tarea cambiar el estado al servicio a que esta en proceso\r\n      }\r\n    }).catch((error) => {\r\n      console.log(error);\r\n\r\n    }\r\n    )\r\n  }\r\n  finalizarTarea = (tarId) => {\r\n    console.log(tarId);\r\n    axios.post(url + '/tareaAgendada/finalizarTarea/?id=' + tarId).then((resp) => {\r\n\r\n      if  (resp.status >= 200 && resp.status <= 205)  {\r\n        this.setState({\r\n          estaInciado: false,\r\n          btnFinalizar: true,\r\n            mensaje: resp.data,\r\n            mensajeSuccess: \"ok\",\r\n         \r\n        });\r\n      }\r\n      this.verTareas(this.state.idServicio);\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    }\r\n    )\r\n  }\r\n  btnIniciar(id) {\r\n    const val = id;\r\n    //retornar un booleano\r\n    return val\r\n  }\r\n  btnFinalizar(id) {\r\n    const val = id;\r\n    //retornar un booleano\r\n    return val\r\n  }\r\n  iniciarNotificacion = () => {\r\n    console.log(localStorage.getItem('usuario'))\r\n    console.log(this.state.idServicio)\r\n    axios.post(url + '/notificacion/iniciarNotificacion/?idUsu=' + localStorage.getItem('usuario') + \"&idSerAge=\"\r\n      + this.state.idServicio).then((resp) => {\r\n        console.log(resp.data);\r\n        this.setState({\r\n\r\n        });\r\n      }).catch((error) => {\r\n        console.log(error);\r\n      }\r\n      )\r\n  }\r\n\r\n  finalizarNotificacion = () => {\r\n    axios.post(url + '/notificacion/finalizarNotificacion/?idUsu=' + localStorage.getItem('usuario') + \"&idSerAge=\"\r\n      + this.state.idServicio + \"&descripcion=\" + this.state.description).then((resp) => {\r\n        console.log(resp.data);\r\n        this.setState({\r\n\r\n        });\r\n      }).catch((error) => {\r\n        console.log(error);\r\n      }\r\n      )\r\n  }\r\n  componentDidMount = () => {\r\n    axios.get(url + '/servicioAgendado/listarActivos').then((resp) => {\r\n      console.log(resp.data);\r\n      this.setState({\r\n        serviciosAgendados: resp.data,\r\n      });\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    }\r\n    )\r\n    console.log(localStorage.getItem(\"usuario\"))\r\n\r\n    let id = 0\r\n    axios.get(url + '/usuario/buscarPorId/?id='\r\n      + id).then((resp) => {\r\n        this.setState({\r\n          usuario: resp.data,\r\n        });\r\n      }).catch((error) => {\r\n        this.setState({\r\n          mensaje: error.response,\r\n          mensajeError: \"error\"\r\n        });\r\n        console.log(error);\r\n      }\r\n      )\r\n\r\n  };\r\n\r\n  manejadorOnChange = e => {\r\n\r\n    this.setState({\r\n\r\n      searchTerm: e.target.value,\r\n\r\n    })\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1 >Lista Agenda</h1>\r\n        <input type=\"text\" placeholder=\"Buscar por estado nombre\" onChange={this.manejadorOnChange} />\r\n        <ReactBoostrap.Table className=\"table \" hover variant=\"light-dark\">\r\n          <thead>\r\n            <th scope=\"col\">Id</th >\r\n            <th scope=\"col\">Estado</th>\r\n            <th scope=\"col\">Fecha Elegida</th>\r\n            <th scope=\"col\">Fecha Registro</th>\r\n            <th scope=\"col\">Id Servicio</th>\r\n          </thead>\r\n          <tbody>\r\n            {\r\n              this.state.serviciosAgendados.filter(elemento =>\r\n                elemento.estado.nombre.toLowerCase().includes(this.state.searchTerm.toLowerCase()))\r\n                .map(e => (\r\n                  <tr key={e.id} value={e} id={e.id}>\r\n                    <td>{e.id}</td>\r\n                    <td>{e.estado.nombre}</td>\r\n                    <td>{e.fechaElegida.substring(0, [10])}</td>\r\n                    <td>{e.fechaRegistro.substring(0, [10])}</td>\r\n                    <td>{e.servicio.id}</td>\r\n                    <td>\r\n\r\n                      <ButtonGroup>\r\n                        <Button className=\"button\" onClick={this.verTareas.bind(this, e.id)}>Ver tareas</Button>\r\n                      </ButtonGroup>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n                )\r\n            }\r\n\r\n          </tbody>\r\n        </ReactBoostrap.Table>\r\n        <ReactBoostrap.Table>\r\n          <thead>\r\n            <th scope=\"col\">Id</th >\r\n            <th scope=\"col\">Tarea nombre</th>\r\n            <th scope=\"col\">Tarea descripcion</th>\r\n            <th scope=\"col\">Estado</th>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.estaCliqueado === true ?\r\n              this.state.tareas.map(e => (\r\n                <tr key={e.id} value={e} id={e.id}>\r\n                  <td>{e.id}</td>\r\n                  <td>{e.tarea.nombre}</td>\r\n                  <td>{e.tarea.descripcion}</td>\r\n                  <td>{e.estado.nombre}</td>\r\n                  {/* <td>{e.fechaInicio !== null ? e.fechaInicio.substring(0, [10]) : this.state.fechaVacia}</td>\r\n                  <td>{e.fechaFin !== null ? e.fechaFin.substring(0, [10]) : this.state.fechaVacia}</td> */}\r\n                  <td>\r\n                    {/* {this.state.btnIniciar===false&&this.btnIniciar(e.id)===e.id? */}\r\n                    <ButtonGroup>\r\n                      <Button className=\"button\"\r\n                        disabled={(e.estado.nombre !== (\"EN ESPERA DE COMIENZO\")\r\n                          && e.estado.nombre === (\"FINALIZADO\")) || (e.estado.nombre === (\"COMENZADA\"))}\r\n                        onClick={this.iniciarTarea.bind(this, e.id)}>Iniciar</Button>\r\n                    </ButtonGroup>\r\n                    {/* :null} */}\r\n                  </td>\r\n                  <td>\r\n                    <ButtonGroup>\r\n                      <Button className=\"button\"\r\n                        disabled={((e.estado.nombre !== (\"COMENZADA\")\r\n                          && e.estado.nombre === (\"EN ESPERA DE COMIENZO\"))\r\n                          || (e.estado.nombre === (\"FINALIZADO\")))}\r\n                        onClick={this.finalizarTarea.bind(this, e.id)}>Finalizar</Button>\r\n                    </ButtonGroup>\r\n                  </td>\r\n                </tr>\r\n              )) : null\r\n            }\r\n            <input type=\"text\" name=\"description\"\r\n              placeholder=\"Ingrese una descripción\" onChange={this.onChangeDescription} />\r\n            {/* <ButtonGroup> */}\r\n            <Button className=\"secondary\" onClick={this.finalizarAlServicio}>Finalizar Servicio</Button>\r\n            {/* </ButtonGroup> */}\r\n\r\n\r\n          </tbody>\r\n        </ReactBoostrap.Table>\r\n        {this.state.mensajeSuccess === \"ok\" ?\r\n          <div class=\"alert alert-success\" role=\"alert\">\r\n            {this.state.mensaje}\r\n          </div> : (this.state.mensajeError === \"error\") ?\r\n            <div class=\"alert alert-danger\" role=\"alert\">\r\n              {this.state.mensaje}\r\n            </div> : null\r\n        }\r\n      </div>\r\n    );\r\n\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}