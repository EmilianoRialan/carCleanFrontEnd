{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\Desktop\\\\proyecto car clean 01 09 2021\\\\proyecto\\\\src\\\\components\\\\Agenda\\\\AgendarServicio.js\";\nimport React, { Component } from 'react';\nimport * as ReactBoostrap from 'react-bootstrap';\nimport axios from 'axios';\nimport { url } from '../API.js';\nimport DayPicker from 'react-day-picker';\nimport 'react-day-picker/lib/style.css';\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class AgendarServicio extends Component {\n  constructor(props) {\n    super(props);\n\n    this.manejadorBoton = e => {\n      e.preventDefault();\n      console.log(this.state.idSer);\n      console.log(localStorage.getItem('usuario') + 'id del usuario');\n      console.log(this.state.selectedDay);\n      console.log(this.state.horarioElegido);\n\n      if (this.handleValidation()) {\n        axios.post(url + '/servicioAgendado/insertar?idSer=' + this.state.idSer + \"&idUsu=\" + localStorage.getItem('usuario') + \"&fechaElegida=\" + this.state.selectedDay.toLocaleDateString() + \"&horarioElegido=\" + this.state.horarioElegido).then(response => {\n          if (response.status === 200) {\n            this.setState({\n              mensaje: \"Ingreso Correcto\",\n              mensajeSuccess: \"ok\"\n            });\n            return /*#__PURE__*/_jsxDEV(Redirect, {\n              to: window.location.href = '/AgendarServicio'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 32\n            }, this);\n          } else {\n            this.setState({\n              mensaje: \"Ingreso Incorrecto\",\n              mensajeError: \"error\"\n            });\n          }\n        }).catch(error => {\n          console.log(error);\n          this.setState({\n            mensaje: \"Ingreso Incorrecto\",\n            mensajeError: \"error\"\n          });\n        });\n      }\n    };\n\n    this.componentDidMount = () => {\n      axios.get(url + '/servicio/listarActivos').then(resp => {\n        this.setState({\n          servicios: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      axios.get(url + '/servicioAgendado/listarActivos').then(resp => {\n        this.setState({\n          serviciosAgendados: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      axios.get(url + '/servicioAgendado/listarAgenda?num=3').then(resp => {\n        this.setState({\n          serviciosFull: resp.data\n        });\n        this.cargarFecha();\n      }).catch(error => {\n        console.log(error);\n      });\n      axios.get(url + '/servicioAgendado/ListarServiciosMedio?num=2').then(resp => {\n        this.setState({\n          serviciosMedios: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.cargarFecha = () => {\n      const today = new Date();\n      const fechasAntes = [{\n        before: today\n      }];\n      const fechas = fechasAntes;\n      this.state.serviciosFull.forEach(e => {\n        fechas.push(new Date(e));\n      });\n      this.setState({\n        fechasConvertidas: fechas\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        idSer: event.target.value\n      });\n    };\n\n    this.changeHorario = event => {\n      this.setState({\n        horarioElegido: event.target.value\n      });\n    };\n\n    this.handleDayClick = (day, {\n      selected,\n      disabled\n    }) => {\n      if (disabled) {\n        return;\n      }\n\n      if (selected) {\n        this.setState({\n          selectedDay: undefined\n        });\n        return;\n      } else {\n        this.setState({\n          selectedDay: day\n        });\n        this.llamarDia(day);\n      }\n    };\n\n    this.llamarDia = day => {\n      axios.get(url + '/servicioAgendado/llamarServicioDia?dia=' + day.toLocaleDateString()).then(resp => {\n        this.setState({\n          servicioDia: resp.data\n        });\n        this.borrarHoras(resp.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.borrarHoras = servicioDia => {\n      let array = this.state.horarios;\n      let idServicio = this.state.idSer;\n\n      if (idServicio === '3') {\n        array = [{\n          hora: '9 hrs'\n        }];\n      } else if (idServicio === '2') {\n        array = [{\n          hora: \"9 hrs\"\n        }, {\n          hora: \"10 hrs\"\n        }, {\n          hora: \"11 hrs\"\n        }, {\n          hora: \"12 hrs\"\n        }, {\n          hora: \"14 hrs\"\n        }];\n      }\n\n      servicioDia.forEach(e => {\n        if (e.servicioId === 1) {\n          let h = e.horaElegida;\n          array = array.filter(element => element.hora !== h);\n        } else if (e.servicioId === 2) {\n          let hr = e.horaElegida;\n          let number = hr.match(/\\d+/)[0];\n          let n = Number(number);\n          let hr1 = n + 1 + ' hrs';\n          let hr2 = n + 2 + ' hrs';\n          let hr3 = n + 3 + ' hrs';\n          array = array.filter(element => element.hora !== hr);\n          array = array.filter(element => element.hora !== hr1);\n          array = array.filter(element => element.hora !== hr2);\n          array = array.filter(element => element.hora !== hr3);\n\n          if (n >= 10 && n <= 12) {\n            let neg1 = n - 1 + ' hrs';\n            let neg2 = n - 2 + ' hrs';\n            let neg3 = n - 3 + ' hrs';\n            array = array.filter(element => element.hora !== neg1);\n            array = array.filter(element => element.hora !== neg2);\n            array = array.filter(element => element.hora !== neg3);\n          }\n        }\n\n        if (servicioDia.length >= 1) {\n          if (idServicio === '2') {\n            let hr = e.horaElegida; // '11 hrs'\n\n            let number = hr.match(/\\d+/)[0]; //'11'\n\n            let n = Number(number); // 11 int\n\n            let neg1 = n - 1 + ' hrs'; // let neg1 = 11 - 1 \n\n            let neg2 = n - 2 + ' hrs';\n            let neg3 = n - 3 + ' hrs';\n            array = array.filter(element => element.hora !== neg1);\n            array = array.filter(element => element.hora !== neg2);\n            array = array.filter(element => element.hora !== neg3);\n          }\n        }\n      });\n      this.setState({\n        horas: array\n      });\n    };\n\n    this.state = {\n      diaElegido: '',\n      servicios: [],\n      servicioElegido: \"\",\n      mensaje: \"\",\n      idCli: 0,\n      serviciosFull: [],\n      serviciosMedios: [],\n      serviciosBasicos: [],\n      selectedDay: \"\",\n      serviciosAgendados: [],\n      fechasConvertidas: {},\n      idSer: -1,\n      mensajeError: \"\",\n      mensajeSuccess: \"\",\n      horas: [],\n      horarios: [{\n        hora: \"9 hrs\"\n      }, {\n        hora: \"10 hrs\"\n      }, {\n        hora: \"11 hrs\"\n      }, {\n        hora: \"12 hrs\"\n      }, {\n        hora: \"14 hrs\"\n      }, {\n        hora: \"15 hrs\"\n      }, {\n        hora: \"16 hrs\"\n      }, {\n        hora: \"17 hrs\"\n      }],\n      horarioElegido: \"\",\n      servicioDia: [],\n      errors: {}\n    };\n  }\n\n  handleValidation() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true; //idSer\n\n    if (this.state.idSer == -1) {\n      formIsValid = false;\n      errors[\"idSer\"] = \"Debe ingresar el servicio que desea agendar!!!\";\n    } //fechaElegida\n\n\n    if (this.state.selectedDay === \"\") {\n      formIsValid = false;\n      errors[\"fechaElegida\"] = \"Debe ingresar la fecha en la que desea agendarse!!!\";\n    } //horarioElegido\n\n\n    if (this.state.horarioElegido === \"\") {\n      formIsValid = false;\n      errors[\"horarioElegido\"] = \"Debe ingresar el horario en el que desea agendarse!!!\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  render() {\n    if (localStorage.getItem('usuario') === null) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: window.location.href = '/Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 20\n      }, this);\n    } else //var holydays = [new Date('08/22/2021'), new Date('08/25/2021'), new Date('08/29/2021')];       \n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Agende su servicio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            id: \"labeles\",\n            className: \"lead\",\n            children: \"Agende su servicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"red\"\n            },\n            children: this.state.errors[\"idSer\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"idSer\",\n              name: \"idSer\",\n              onChange: this.handleChange,\n              className: \"form-control\",\n              placeholderText: \"Servicios\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: true,\n                selected: true,\n                children: \"Eliga un servicio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 33\n              }, this), this.state.servicios.map(servicioElegido => /*#__PURE__*/_jsxDEV(\"option\", {\n                name: \"servicio\",\n                value: servicioElegido.id,\n                selectedValue: servicioElegido,\n                children: servicioElegido.nombre\n              }, servicioElegido, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 37\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.submit,\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"red\"\n                },\n                children: this.state.errors[\"fechaElegida\"]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(DayPicker, {\n                  id: \"fechaElegida\",\n                  name: \"fechaElegida\",\n                  onDayClick: this.handleDayClick,\n                  selectedDays: this.state.selectedDay,\n                  disabledDays: this.state.fechasConvertidas\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 37\n                }, this), this.state.selectedDay ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: this.state.selectedDay.toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Elija un d\\xEDa.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                id: \"labeles\",\n                className: \"lead\",\n                children: \"Ingrese su horario\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"red\"\n                },\n                children: this.state.errors[\"horarioElegido\"]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: this.changeHorario,\n                id: \"horarioElegido\",\n                name: \"horarioElegido\",\n                className: \"form-control\",\n                placeholderText: \"Horarios\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  disabled: true,\n                  selected: true,\n                  children: \"Eliga un horario\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 37\n                }, this), this.state.horas.map(horario => /*#__PURE__*/_jsxDEV(\"option\", {\n                  name: \"horario\",\n                  value: horario.hora,\n                  selectedValue: horario,\n                  children: horario.hora\n                }, horario, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 41\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ReactBoostrap.Button, {\n                type: \"submit\",\n                variant: \"success\",\n                className: \"fadeIn fourth\",\n                value: \"Crear Servicio\",\n                onClick: this.manejadorBoton,\n                children: \"Agendar Servicio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 29\n            }, this), this.state.mensajeSuccess === \"ok\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"alert alert-success\",\n              role: \"alert\",\n              children: this.state.mensaje\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 33\n            }, this) : this.state.mensajeError === \"error\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"alert alert-danger\",\n              role: \"alert\",\n              children: this.state.mensaje\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 37\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/emili/Desktop/proyecto car clean 01 09 2021/proyecto/src/components/Agenda/AgendarServicio.js"],"names":["React","Component","ReactBoostrap","axios","url","DayPicker","Redirect","AgendarServicio","constructor","props","manejadorBoton","e","preventDefault","console","log","state","idSer","localStorage","getItem","selectedDay","horarioElegido","handleValidation","post","toLocaleDateString","then","response","status","setState","mensaje","mensajeSuccess","window","location","href","mensajeError","catch","error","componentDidMount","get","resp","servicios","data","serviciosAgendados","serviciosFull","cargarFecha","serviciosMedios","today","Date","fechasAntes","before","fechas","forEach","push","fechasConvertidas","handleChange","event","target","value","changeHorario","handleDayClick","day","selected","disabled","undefined","llamarDia","servicioDia","borrarHoras","array","horarios","idServicio","hora","servicioId","h","horaElegida","filter","element","hr","number","match","n","Number","hr1","hr2","hr3","neg1","neg2","neg3","length","horas","diaElegido","servicioElegido","idCli","serviciosBasicos","errors","fields","formIsValid","render","color","map","id","nombre","submit","horario"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as ReactBoostrap from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport { url } from '../API.js';\r\nimport DayPicker from 'react-day-picker';\r\nimport 'react-day-picker/lib/style.css';\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\n\r\nexport default class AgendarServicio extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            diaElegido: '',\r\n            servicios: [],\r\n            servicioElegido: \"\",\r\n            mensaje: \"\",\r\n            idCli: 0,\r\n            serviciosFull: [],\r\n            serviciosMedios: [],\r\n            serviciosBasicos: [],\r\n            selectedDay: \"\",\r\n            serviciosAgendados: [],\r\n            fechasConvertidas: {},\r\n            idSer: (-1),\r\n            mensajeError: \"\",\r\n            mensajeSuccess: \"\",\r\n            horas: [],\r\n            horarios: [\r\n                { hora: \"9 hrs\" },\r\n                { hora: \"10 hrs\" },\r\n                { hora: \"11 hrs\" },\r\n                { hora: \"12 hrs\" },\r\n                { hora: \"14 hrs\" },\r\n                { hora: \"15 hrs\" },\r\n                { hora: \"16 hrs\" },\r\n                { hora: \"17 hrs\" },\r\n            ],\r\n            horarioElegido: \"\",\r\n            servicioDia: [],\r\n            errors: {},\r\n        }\r\n    }\r\n\r\n    handleValidation() {\r\n        let fields = this.state.fields;\r\n        let errors = {};\r\n        let formIsValid = true;\r\n\r\n        //idSer\r\n        if (this.state.idSer == -1) {\r\n            formIsValid = false;\r\n            errors[\"idSer\"] = \"Debe ingresar el servicio que desea agendar!!!\";\r\n        }\r\n\r\n        //fechaElegida\r\n        if (this.state.selectedDay === \"\") {\r\n            formIsValid = false;\r\n            errors[\"fechaElegida\"] = \"Debe ingresar la fecha en la que desea agendarse!!!\";\r\n        }\r\n\r\n        //horarioElegido\r\n        if (this.state.horarioElegido === \"\") {\r\n            formIsValid = false;\r\n            errors[\"horarioElegido\"] = \"Debe ingresar el horario en el que desea agendarse!!!\";\r\n        }\r\n\r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n    }\r\n\r\n    manejadorBoton = (e) => {\r\n        e.preventDefault();\r\n        console.log(this.state.idSer)\r\n        console.log(localStorage.getItem('usuario') + 'id del usuario')\r\n        console.log(this.state.selectedDay)\r\n        console.log(this.state.horarioElegido)\r\n        if (this.handleValidation()) {\r\n            axios.post(url + '/servicioAgendado/insertar?idSer=' + this.state.idSer + \"&idUsu=\" + localStorage.getItem('usuario')\r\n                + \"&fechaElegida=\" + this.state.selectedDay.toLocaleDateString() + \"&horarioElegido=\" + this.state.horarioElegido)\r\n                .then(response => {\r\n                    if (response.status === 200) {\r\n                        this.setState({ mensaje: \"Ingreso Correcto\", mensajeSuccess: \"ok\" });\r\n                        return <Redirect to={window.location.href = '/AgendarServicio'} />\r\n                    } else {\r\n                        this.setState({ mensaje: \"Ingreso Incorrecto\", mensajeError: \"error\" });\r\n                    }\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                    this.setState({ mensaje: \"Ingreso Incorrecto\", mensajeError: \"error\" });\r\n                })\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        axios.get(url + '/servicio/listarActivos').then((resp) => {\r\n            this.setState({\r\n                servicios: resp.data,\r\n            });\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n        axios.get(url + '/servicioAgendado/listarActivos').then((resp) => {\r\n            this.setState({\r\n                serviciosAgendados: resp.data,\r\n            });\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n        axios.get(url + '/servicioAgendado/listarAgenda?num=3').then((resp) => {\r\n            this.setState({\r\n                serviciosFull: resp.data,\r\n            });\r\n            this.cargarFecha()\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n        axios.get(url + '/servicioAgendado/ListarServiciosMedio?num=2').then((resp) => {\r\n            this.setState({\r\n                serviciosMedios: resp.data,\r\n            });\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n    };\r\n\r\n\r\n\r\n\r\n    cargarFecha = () => {\r\n        const today = new Date();\r\n        const fechasAntes = [{ before: today }];\r\n        const fechas = fechasAntes;\r\n        this.state.serviciosFull.forEach(e => {\r\n            fechas.push(new Date(e))\r\n        });\r\n        this.setState({\r\n            fechasConvertidas: fechas,\r\n        })\r\n    }\r\n\r\n    handleChange = event => {\r\n        this.setState({\r\n            idSer: event.target.value,\r\n        });\r\n    }\r\n\r\n    changeHorario = event => {\r\n        this.setState({\r\n            horarioElegido: event.target.value,\r\n        });\r\n    }\r\n\r\n    handleDayClick = (day, { selected, disabled }) => {\r\n        if (disabled) {\r\n            return;\r\n        }\r\n        if (selected) {\r\n            this.setState({ selectedDay: undefined });\r\n            return;\r\n        } else {\r\n            this.setState({\r\n                selectedDay: day,\r\n            });\r\n            this.llamarDia(day);\r\n        }\r\n\r\n    }\r\n\r\n    llamarDia = (day) => {\r\n        axios.get(url + '/servicioAgendado/llamarServicioDia?dia=' + day.toLocaleDateString()).then((resp) => {\r\n            this.setState({\r\n                servicioDia: resp.data,\r\n            });\r\n            this.borrarHoras(resp.data);\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n    }\r\n\r\n    borrarHoras = (servicioDia) => {\r\n        let array = this.state.horarios;\r\n        let idServicio = this.state.idSer;\r\n        if (idServicio === '3') {\r\n            array = [{ hora: '9 hrs' }]\r\n        } else if (idServicio === '2') {\r\n            array = [\r\n                { hora: \"9 hrs\" },\r\n                { hora: \"10 hrs\" },\r\n                { hora: \"11 hrs\" },\r\n                { hora: \"12 hrs\" },\r\n                { hora: \"14 hrs\" }];\r\n        }\r\n        servicioDia.forEach(e => {\r\n            if (e.servicioId === 1) {\r\n                let h = e.horaElegida;\r\n                array = array.filter(element => element.hora !== h);\r\n            } else if (e.servicioId === 2) {\r\n                let hr = e.horaElegida;\r\n                let number = hr.match(/\\d+/)[0]\r\n                let n = Number(number);\r\n                let hr1 = n + 1 + ' hrs';\r\n                let hr2 = n + 2 + ' hrs';\r\n                let hr3 = n + 3 + ' hrs';\r\n                array = array.filter(element => element.hora !== hr);\r\n                array = array.filter(element => element.hora !== hr1);\r\n                array = array.filter(element => element.hora !== hr2);\r\n                array = array.filter(element => element.hora !== hr3);\r\n                if (n >= 10 && n <= 12) {\r\n                    let neg1 = n - 1 + ' hrs';\r\n                    let neg2 = n - 2 + ' hrs';\r\n                    let neg3 = n - 3 + ' hrs';\r\n                    array = array.filter(element => element.hora !== neg1);\r\n                    array = array.filter(element => element.hora !== neg2);\r\n                    array = array.filter(element => element.hora !== neg3);\r\n                }\r\n            }\r\n            if (servicioDia.length >= 1) {                            \r\n                if (idServicio === '2') {                    \r\n                    let hr = e.horaElegida;// '11 hrs'\r\n                    let number = hr.match(/\\d+/)[0] //'11'\r\n                    let n = Number(number); // 11 int\r\n                    let neg1 = n - 1 + ' hrs'; // let neg1 = 11 - 1 \r\n                    let neg2 = n - 2 + ' hrs';\r\n                    let neg3 = n - 3 + ' hrs';\r\n                    array = array.filter(element => element.hora !== neg1);\r\n                    array = array.filter(element => element.hora !== neg2);\r\n                    array = array.filter(element => element.hora !== neg3);\r\n                }\r\n            }\r\n        });\r\n        this.setState({\r\n            horas: array,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (localStorage.getItem('usuario') === null) {\r\n            return <Redirect to={window.location.href = '/Login'} />\r\n        } else\r\n            //var holydays = [new Date('08/22/2021'), new Date('08/25/2021'), new Date('08/29/2021')];       \r\n            return (\r\n                <div>\r\n                    <h1>Agende su servicio</h1>\r\n                    <div className=\"container\">\r\n                        <label id=\"labeles\" className=\"lead\" >Agende su servicio</label>\r\n                        <span style={{ color: \"red\" }}>{this.state.errors[\"idSer\"]}</span>\r\n                        <div className=\"\">\r\n                            <select\r\n                                id='idSer'\r\n                                name='idSer'\r\n                                onChange={this.handleChange}\r\n                                className=\"form-control\"\r\n                                placeholderText=\"Servicios\">\r\n                                <option disabled selected >Eliga un servicio</option>\r\n                                {this.state.servicios.map(servicioElegido => (\r\n                                    <option\r\n                                        key={servicioElegido}\r\n                                        name=\"servicio\"\r\n                                        value={servicioElegido.id}\r\n                                        selectedValue={servicioElegido}\r\n                                    >{servicioElegido.nombre}</option>\r\n                                ))}</select>\r\n\r\n                            <br />\r\n                            <form onSubmit={this.submit}>\r\n                                <br />\r\n                                <span style={{ color: \"red\" }}>{this.state.errors[\"fechaElegida\"]}</span>\r\n                                <div>\r\n                                    <DayPicker\r\n                                        id='fechaElegida'\r\n                                        name='fechaElegida'\r\n                                        onDayClick={this.handleDayClick}\r\n                                        selectedDays={this.state.selectedDay}\r\n                                        disabledDays={this.state.fechasConvertidas}\r\n                                    />\r\n                                    {this.state.selectedDay ? (\r\n                                        <p>{this.state.selectedDay.toLocaleDateString()}</p>\r\n                                    ) : (\r\n                                        <p>Elija un d√≠a.</p>\r\n                                    )}\r\n                                </div>\r\n                                <br />\r\n                                <label id=\"labeles\" className=\"lead\" >Ingrese su horario</label>\r\n                                <span style={{ color: \"red\" }}>{this.state.errors[\"horarioElegido\"]}</span>\r\n                                <select onChange={this.changeHorario}\r\n                                    id='horarioElegido'\r\n                                    name='horarioElegido'\r\n                                    className=\"form-control\"\r\n                                    placeholderText=\"Horarios\">\r\n                                    <option disabled selected >Eliga un horario</option>\r\n                                    {this.state.horas.map(horario => (\r\n                                        <option\r\n                                            key={horario}\r\n                                            name=\"horario\"\r\n                                            value={horario.hora}\r\n                                            selectedValue={horario}\r\n                                        >{horario.hora}</option>\r\n                                    ))}\r\n                                </select>\r\n                                <br />\r\n                                <ReactBoostrap.Button type=\"submit\" variant=\"success\" className=\"fadeIn fourth\" value=\"Crear Servicio\"\r\n                                    onClick={this.manejadorBoton}>Agendar Servicio</ReactBoostrap.Button >\r\n                            </form>\r\n\r\n                            {this.state.mensajeSuccess === \"ok\" ?\r\n                                <div class=\"alert alert-success\" role=\"alert\">\r\n                                    {this.state.mensaje}\r\n                                </div> : (this.state.mensajeError === \"error\") ?\r\n                                    <div class=\"alert alert-danger\" role=\"alert\">\r\n                                        {this.state.mensaje}\r\n                                    </div> : null\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}