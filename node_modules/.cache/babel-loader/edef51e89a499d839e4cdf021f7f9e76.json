{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\Desktop\\\\proyecto car clean 01 09 2021\\\\proyecto\\\\src\\\\components\\\\Agenda\\\\ListarAgenda.js\";\nimport React, { Component } from 'react';\nimport * as ReactBoostrap from 'react-bootstrap';\nimport axios from 'axios';\nimport { url } from '../API.js';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ListarAgenda extends Component {\n  constructor() {\n    super();\n\n    this.onChangeDescription = e => {\n      console.log(e.target.value);\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.verTareas = serId => {\n      console.log(serId);\n      axios.post(url + '/tareaAgendada/listasTareasServicio/?id=' + serId).then(resp => {\n        console.log(resp.data);\n        this.setState({\n          tareas: resp.data,\n          estaCliqueado: true,\n          idServicio: serId\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.iniciarAlServicio = e => {\n      console.log(this.state.idServicio);\n      axios.post(url + '/servicioAgendado/iniciarServicioAgendado/?id=' + this.state.idServicio).then(resp => {\n        console.log(resp.data);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n          this.componentDidMount();\n        }\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n      });\n      this.limpiar();\n    };\n\n    this.finalizarAlServicio = e => {\n      console.log(this.state.idServicio);\n      axios.post(url + '/servicioAgendado/finalizarServicioAgendado/?id=' + this.state.idServicio).then(resp => {\n        console.log(resp.data);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n          this.finalizarNotificacion();\n          this.componentDidMount();\n          this.verTareas(this.state.idServicio);\n        }\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n        console.log(error);\n      });\n      this.limpiar();\n    };\n\n    this.iniciarTarea = tarId => {\n      console.log(tarId);\n      axios.post(url + '/tareaAgendada/iniciarTarea/?id=' + tarId).then(resp => {\n        console.log(resp);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            estaInciado: true,\n            //boolean esta iniciado\n            btnIniciar: true,\n            btnFinalizar: false,\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n          this.verTareas(this.state.idServicio);\n          this.iniciarAlServicio();\n          this.iniciarNotificacion(); //al iniciar la tarea cambiar el estado al servicio a que esta en proceso\n        }\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n        console.log(error);\n      });\n      this.limpiar();\n    };\n\n    this.finalizarTarea = tarId => {\n      console.log(tarId);\n      axios.post(url + '/tareaAgendada/finalizarTarea/?id=' + tarId).then(resp => {\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            estaInciado: false,\n            btnFinalizar: true,\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n        }\n\n        this.verTareas(this.state.idServicio);\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n        console.log(error);\n      });\n      this.limpiar();\n    };\n\n    this.iniciarNotificacion = () => {\n      console.log(localStorage.getItem('usuario'));\n      console.log(this.state.idServicio);\n      axios.post(url + '/notificacion/iniciarNotificacion/?idUsu=' + localStorage.getItem('usuario') + \"&idSerAge=\" + this.state.idServicio).then(resp => {\n        if (resp.status >= 200 && resp.status <= 205) {\n          console.log(resp.data);\n          this.setState({\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n      });\n      this.limpiar();\n    };\n\n    this.finalizarNotificacion = () => {\n      axios.post(url + '/notificacion/finalizarNotificacion/?idSerAge=' + this.state.idServicio + \"&descripcion=\" + this.state.description).then(resp => {\n        console.log(resp.data);\n\n        if (resp.status >= 200 && resp.status <= 205) {\n          this.setState({\n            mensaje: resp.data,\n            mensajeSuccess: \"ok\"\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n        this.setState({\n          mensaje: error.response.data,\n          mensajeError: \"error\"\n        });\n      });\n      this.limpiar();\n    };\n\n    this.componentDidMount = () => {\n      axios.get(url + '/servicioAgendado/listarActivos').then(resp => {\n        console.log(resp.data);\n        this.setState({\n          serviciosAgendados: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      let id = 0;\n      axios.get(url + '/usuario/buscarPorId/?id=' + id).then(resp => {\n        this.setState({\n          usuario: resp.data\n        });\n      }).catch(error => {\n        this.setState({\n          mensaje: error.response,\n          mensajeError: \"error\"\n        });\n        console.log(error);\n      });\n      this.limpiar();\n    };\n\n    this.manejadorOnChange = e => {\n      this.setState({\n        searchTerm: e.target.value\n      });\n    };\n\n    this.state = {\n      serviciosAgendados: [],\n      log: \"\",\n      mensaje: \"\",\n      date: new Date(),\n      tareas: [],\n      estaCliqueado: false,\n      estaIniciado: false,\n      notificacion: {},\n      idServicio: \"\",\n      description: \"\",\n      idCli: 1,\n      searchTerm: \"\",\n      usuario: [],\n      fechaVacia: \"VACIA\",\n      btnIniciar: false,\n      //verdadero esta deshabilitado y falso esta habilitado\n      btnFinalizar: true,\n      mensajeError: \"\",\n      mensajeSuccess: \"\"\n    };\n    this.verTareas.bind();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  limpiar() {\n    this.timer = setInterval(() => {\n      // window.location.reload(1);\n      this.setState({\n        mensajeError: \"\",\n        mensajeSuccess: \"\"\n      });\n    }, 5000);\n  }\n\n  btnIniciar(id) {\n    const val = id; //retornar un booleano\n\n    return val;\n  }\n\n  btnFinalizar(id) {\n    const val = id; //retornar un booleano\n\n    return val;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Lista Agenda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Buscar por estado nombre\",\n        onChange: this.manejadorOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactBoostrap.Table, {\n        className: \"table \",\n        hover: true,\n        variant: \"light-dark\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Estado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Fecha Elegida\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Fecha Registro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Id Servicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.serviciosAgendados.filter(elemento => elemento.estado.nombre.toLowerCase().includes(this.state.searchTerm.toLowerCase())).map(e => /*#__PURE__*/_jsxDEV(\"tr\", {\n            value: e,\n            id: e.id,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.estado.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.fechaElegida.substring(0, [10])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.fechaRegistro.substring(0, [10])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.servicio.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"button\",\n                  onClick: this.verTareas.bind(this, e.id),\n                  children: \"Ver tareas\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 21\n            }, this)]\n          }, e.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactBoostrap.Table, {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Tarea nombre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Tarea descripcion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Estado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [this.state.estaCliqueado === true ? this.state.tareas.map(e => /*#__PURE__*/_jsxDEV(\"tr\", {\n            value: e,\n            id: e.id,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.tarea.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.tarea.descripcion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: e.estado.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"button\",\n                  disabled: e.estado.nombre !== \"EN ESPERA DE COMIENZO\" && e.estado.nombre === \"FINALIZADO\" || e.estado.nombre === \"COMENZADA\",\n                  onClick: this.iniciarTarea.bind(this, e.id),\n                  children: \"Iniciar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"button\",\n                  disabled: e.estado.nombre !== \"COMENZADA\" && e.estado.nombre === \"EN ESPERA DE COMIENZO\" || e.estado.nombre === \"FINALIZADO\",\n                  onClick: this.finalizarTarea.bind(this, e.id),\n                  children: \"Finalizar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this)]\n          }, e.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this)) : null, /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"description\",\n            placeholder: \"Ingrese una descripci\\xF3n\",\n            onChange: this.onChangeDescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"secondary\",\n            onClick: this.finalizarAlServicio,\n            children: \"Finalizar Servicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), this.state.mensajeSuccess === \"ok\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-success\",\n        role: \"alert\",\n        children: this.state.mensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this) : this.state.mensajeError === \"error\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-danger\",\n        role: \"alert\",\n        children: this.state.mensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/emili/Desktop/proyecto car clean 01 09 2021/proyecto/src/components/Agenda/ListarAgenda.js"],"names":["React","Component","ReactBoostrap","axios","url","Button","ButtonGroup","ListarAgenda","constructor","onChangeDescription","e","console","log","target","value","setState","description","verTareas","serId","post","then","resp","data","tareas","estaCliqueado","idServicio","catch","error","iniciarAlServicio","state","status","mensaje","mensajeSuccess","componentDidMount","response","mensajeError","limpiar","finalizarAlServicio","finalizarNotificacion","iniciarTarea","tarId","estaInciado","btnIniciar","btnFinalizar","iniciarNotificacion","finalizarTarea","localStorage","getItem","get","serviciosAgendados","id","usuario","manejadorOnChange","searchTerm","date","Date","estaIniciado","notificacion","idCli","fechaVacia","bind","componentWillUnmount","clearInterval","timer","setInterval","val","render","filter","elemento","estado","nombre","toLowerCase","includes","map","fechaElegida","substring","fechaRegistro","servicio","tarea","descripcion"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as ReactBoostrap from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport { url } from '../API.js';\r\nimport Button from 'react-bootstrap/Button'\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\n\r\n\r\n\r\nexport default class ListarAgenda extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      serviciosAgendados: [],\r\n      log: \"\",\r\n      mensaje: \"\",\r\n      date: new Date(),\r\n      tareas: [],\r\n      estaCliqueado: false,\r\n      estaIniciado: false,\r\n      notificacion: {},\r\n      idServicio: \"\",\r\n      description: \"\",\r\n      idCli: 1,\r\n      searchTerm: \"\",\r\n      usuario: [],\r\n      fechaVacia: \"VACIA\",\r\n      btnIniciar: false,//verdadero esta deshabilitado y falso esta habilitado\r\n      btnFinalizar: true,\r\n      mensajeError: \"\",\r\n      mensajeSuccess: \"\",\r\n    }\r\n    this.verTareas.bind();\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer);\r\n}\r\nlimpiar() {\r\n    this.timer = setInterval(() => {\r\n       // window.location.reload(1);\r\n        this.setState({\r\n          mensajeError:\"\",\r\n          mensajeSuccess:\"\",\r\n        });\r\n    }\r\n        , 5000);\r\n}\r\n  onChangeDescription = e => {\r\n    console.log(e.target.value);\r\n    this.setState({\r\n      description: e.target.value,\r\n    })\r\n  }\r\n\r\n  verTareas = (serId) => {\r\n    console.log(serId);\r\n    axios.post(url + '/tareaAgendada/listasTareasServicio/?id=' + serId).then((resp) => {\r\n      console.log(resp.data);\r\n      this.setState({\r\n        tareas: resp.data,\r\n        estaCliqueado: true,\r\n        idServicio: serId,\r\n      });\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    }\r\n    )\r\n  }\r\n  iniciarAlServicio = e => {\r\n    console.log(this.state.idServicio)\r\n    axios.post(url + '/servicioAgendado/iniciarServicioAgendado/?id=' + this.state.idServicio).then((resp) => {\r\n      console.log(resp.data);\r\n      if (resp.status >= 200 && resp.status <= 205) {\r\n        this.setState({\r\n          mensaje: resp.data,\r\n          mensajeSuccess: \"ok\",\r\n        });\r\n        this.componentDidMount();\r\n\r\n      }\r\n    }).catch((error) => {\r\n      this.setState({\r\n        mensaje: error.response.data,\r\n        mensajeError: \"error\"\r\n      });\r\n    }\r\n \r\n    )\r\n    this.limpiar();\r\n  }\r\n  finalizarAlServicio = e => {\r\n    console.log(this.state.idServicio)\r\n    axios.post(url + '/servicioAgendado/finalizarServicioAgendado/?id=' + this.state.idServicio).then((resp) => {\r\n      console.log(resp.data);\r\n      if (resp.status >= 200 && resp.status <= 205) {\r\n        this.setState({\r\n          mensaje: resp.data,\r\n          mensajeSuccess: \"ok\",\r\n        });\r\n        this.finalizarNotificacion();\r\n        this.componentDidMount();\r\n        this.verTareas(this.state.idServicio);\r\n        \r\n      }\r\n    }).catch((error) => {\r\n      this.setState({\r\n        mensaje: error.response.data,\r\n        mensajeError: \"error\"\r\n      });\r\n      console.log(error);\r\n    }\r\n    )\r\n    this.limpiar();\r\n  }\r\n  iniciarTarea = (tarId) => {\r\n    console.log(tarId);\r\n    axios.post(url + '/tareaAgendada/iniciarTarea/?id=' + tarId).then((resp) => {\r\n      console.log(resp);\r\n      if  (resp.status >= 200 && resp.status <= 205)  {\r\n        this.setState({\r\n          estaInciado: true,  //boolean esta iniciado\r\n          btnIniciar: true,\r\n          btnFinalizar: false,\r\n            mensaje: resp.data,\r\n            mensajeSuccess: \"ok\",\r\n         \r\n        });\r\n        this.verTareas(this.state.idServicio);\r\n        this.iniciarAlServicio();\r\n        this.iniciarNotificacion();\r\n        //al iniciar la tarea cambiar el estado al servicio a que esta en proceso\r\n      }\r\n    }).catch((error) => {\r\n      this.setState({\r\n        mensaje: error.response.data,\r\n        mensajeError: \"error\"\r\n      });\r\n      console.log(error);\r\n\r\n    }\r\n    )\r\n    this.limpiar();\r\n  }\r\n  finalizarTarea = (tarId) => {\r\n    console.log(tarId);\r\n    axios.post(url + '/tareaAgendada/finalizarTarea/?id=' + tarId).then((resp) => {\r\n\r\n      if  (resp.status >= 200 && resp.status <= 205)  {\r\n        this.setState({\r\n          estaInciado: false,\r\n          btnFinalizar: true,\r\n            mensaje: resp.data,\r\n            mensajeSuccess: \"ok\",\r\n         \r\n        });\r\n      }\r\n      this.verTareas(this.state.idServicio);\r\n    }).catch((error) => {\r\n      this.setState({\r\n        mensaje: error.response.data,\r\n        mensajeError: \"error\"\r\n      });\r\n      console.log(error);\r\n    }\r\n    )\r\n    this.limpiar();\r\n  }\r\n  btnIniciar(id) {\r\n    const val = id;\r\n    //retornar un booleano\r\n    return val\r\n  }\r\n  btnFinalizar(id) {\r\n    const val = id;\r\n    //retornar un booleano\r\n    return val\r\n  }\r\n  iniciarNotificacion = () => {\r\n    console.log(localStorage.getItem('usuario'))\r\n    console.log(this.state.idServicio)\r\n    axios.post(url + '/notificacion/iniciarNotificacion/?idUsu=' + localStorage.getItem('usuario') + \"&idSerAge=\"\r\n      + this.state.idServicio).then((resp) => {\r\n        if  (resp.status >= 200 && resp.status <= 205)  {\r\n        console.log(resp.data);\r\n        this.setState({\r\n          mensaje: resp.data,\r\n          mensajeSuccess: \"ok\",\r\n        });\r\n      }\r\n      }).catch((error) => {\r\n        console.log(error);\r\n        this.setState({\r\n          mensaje: error.response.data,\r\n          mensajeError: \"error\"\r\n        });\r\n      }\r\n      )\r\n      this.limpiar();\r\n  }\r\n\r\n  finalizarNotificacion = () => {\r\n    axios.post(url + '/notificacion/finalizarNotificacion/?idSerAge='\r\n      + this.state.idServicio + \"&descripcion=\" + this.state.description).then((resp) => {\r\n        console.log(resp.data); \r\n        if  (resp.status >= 200 && resp.status <= 205)  {\r\n        this.setState({\r\n          mensaje: resp.data,\r\n          mensajeSuccess: \"ok\",\r\n        });\r\n      }\r\n      }).catch((error) => {\r\n        console.log(error);\r\n        this.setState({\r\n          mensaje: error.response.data,\r\n          mensajeError: \"error\"\r\n        });\r\n      }\r\n      )\r\n      this.limpiar();\r\n  }\r\n  componentDidMount = () => {\r\n    axios.get(url + '/servicioAgendado/listarActivos').then((resp) => {\r\n      console.log(resp.data);\r\n      this.setState({\r\n        serviciosAgendados: resp.data,\r\n      });\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    }\r\n    )\r\n    let id = 0\r\n    axios.get(url + '/usuario/buscarPorId/?id='\r\n      + id).then((resp) => {\r\n        this.setState({\r\n          usuario: resp.data,\r\n        });\r\n      }).catch((error) => {\r\n        this.setState({\r\n          mensaje: error.response,\r\n          mensajeError: \"error\"\r\n        });\r\n        console.log(error);\r\n      }\r\n      )\r\n      this.limpiar();\r\n  };\r\n\r\n  manejadorOnChange = e => {\r\n\r\n    this.setState({\r\n\r\n      searchTerm: e.target.value,\r\n\r\n    })\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1 >Lista Agenda</h1>\r\n        <input type=\"text\" placeholder=\"Buscar por estado nombre\" onChange={this.manejadorOnChange} />\r\n        <ReactBoostrap.Table className=\"table \" hover variant=\"light-dark\">\r\n          <thead>\r\n            <th scope=\"col\">Id</th >\r\n            <th scope=\"col\">Estado</th>\r\n            <th scope=\"col\">Fecha Elegida</th>\r\n            <th scope=\"col\">Fecha Registro</th>\r\n            <th scope=\"col\">Id Servicio</th>\r\n          </thead>\r\n          <tbody>\r\n            {\r\n              this.state.serviciosAgendados.filter(elemento =>\r\n                elemento.estado.nombre.toLowerCase().includes(this.state.searchTerm.toLowerCase()))\r\n                .map(e => (\r\n                  <tr key={e.id} value={e} id={e.id}>\r\n                    <td>{e.id}</td>\r\n                    <td>{e.estado.nombre}</td>\r\n                    <td>{e.fechaElegida.substring(0, [10])}</td>\r\n                    <td>{e.fechaRegistro.substring(0, [10])}</td>\r\n                    <td>{e.servicio.id}</td>\r\n                    <td>\r\n\r\n                      <ButtonGroup>\r\n                        <Button className=\"button\" onClick={this.verTareas.bind(this, e.id)}>Ver tareas</Button>\r\n                      </ButtonGroup>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n                )\r\n            }\r\n\r\n          </tbody>\r\n        </ReactBoostrap.Table>\r\n        <ReactBoostrap.Table>\r\n          <thead>\r\n            <th scope=\"col\">Id</th >\r\n            <th scope=\"col\">Tarea nombre</th>\r\n            <th scope=\"col\">Tarea descripcion</th>\r\n            <th scope=\"col\">Estado</th>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.estaCliqueado === true ?\r\n              this.state.tareas.map(e => (\r\n                <tr key={e.id} value={e} id={e.id}>\r\n                  <td>{e.id}</td>\r\n                  <td>{e.tarea.nombre}</td>\r\n                  <td>{e.tarea.descripcion}</td>\r\n                  <td>{e.estado.nombre}</td>\r\n                  {/* <td>{e.fechaInicio !== null ? e.fechaInicio.substring(0, [10]) : this.state.fechaVacia}</td>\r\n                  <td>{e.fechaFin !== null ? e.fechaFin.substring(0, [10]) : this.state.fechaVacia}</td> */}\r\n                  <td>\r\n                    {/* {this.state.btnIniciar===false&&this.btnIniciar(e.id)===e.id? */}\r\n                    <ButtonGroup>\r\n                      <Button className=\"button\"\r\n                        disabled={(e.estado.nombre !== (\"EN ESPERA DE COMIENZO\")\r\n                          && e.estado.nombre === (\"FINALIZADO\")) || (e.estado.nombre === (\"COMENZADA\"))}\r\n                        onClick={this.iniciarTarea.bind(this, e.id)}>Iniciar</Button>\r\n                    </ButtonGroup>\r\n                    {/* :null} */}\r\n                  </td>\r\n                  <td>\r\n                    <ButtonGroup>\r\n                      <Button className=\"button\"\r\n                        disabled={((e.estado.nombre !== (\"COMENZADA\")\r\n                          && e.estado.nombre === (\"EN ESPERA DE COMIENZO\"))\r\n                          || (e.estado.nombre === (\"FINALIZADO\")))}\r\n                        onClick={this.finalizarTarea.bind(this, e.id)}>Finalizar</Button>\r\n                    </ButtonGroup>\r\n                  </td>\r\n                </tr>\r\n              )) : null\r\n            }\r\n            <input type=\"text\" name=\"description\"\r\n              placeholder=\"Ingrese una descripción\" onChange={this.onChangeDescription} />\r\n            {/* <ButtonGroup> */}\r\n            <Button className=\"secondary\" onClick={this.finalizarAlServicio}>Finalizar Servicio</Button>\r\n            {/* </ButtonGroup> */}\r\n\r\n\r\n          </tbody>\r\n        </ReactBoostrap.Table>\r\n        {this.state.mensajeSuccess === \"ok\" ?\r\n          <div class=\"alert alert-success\" role=\"alert\">\r\n            {this.state.mensaje}\r\n          </div> : (this.state.mensajeError === \"error\") ?\r\n            <div class=\"alert alert-danger\" role=\"alert\">\r\n              {this.state.mensaje}\r\n            </div> : null\r\n        }\r\n      </div>\r\n    );\r\n\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}