{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\Desktop\\\\proyecto car clean 01 09 2021\\\\proyecto\\\\src\\\\components\\\\Agenda\\\\AgendarServicio.js\";\nimport React, { Component } from 'react';\nimport * as ReactBoostrap from 'react-bootstrap';\nimport axios from 'axios';\nimport { url } from '../API.js';\nimport DayPicker from 'react-day-picker';\nimport 'react-day-picker/lib/style.css';\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class AgendarServicio extends Component {\n  constructor(props) {\n    super(props);\n\n    this.manejadorBoton = e => {\n      e.preventDefault();\n      console.log(this.state.idSer);\n      console.log(localStorage.getItem('usuario'));\n      console.log(this.state.selectedDay.toLocaleDateString());\n      console.log(this.state.horarioElegido);\n\n      if (this.state.idSer >= 0) {\n        console.log(\"es mayor\");\n      } else {\n        console.log(\"es menor\");\n      }\n\n      if (this.handleValidation()) {\n        axios.post(url + '/servicioAgendado/insertar?idSer=' + this.state.idSer + \"&idUsu=\" + localStorage.getItem('usuario') + \"&fechaElegida=\" + this.state.selectedDay.toLocaleDateString() + \"&horarioElegido=\" + this.state.horarioElegido).then(response => {\n          console.log(\"entre al 200\");\n\n          if (response.status >= 200 && response.status <= 205) {\n            this.setState({\n              mensaje: response.data,\n              mensajeSuccess: \"ok\"\n            });\n          }\n        }).catch(error => {\n          console.log(\"entre al 500\");\n          console.log(error.response);\n          console.log(error.response.data);\n          console.log(error.response.data.message);\n          this.setState({\n            mensaje: error.response.data,\n            mensajeError: \"error\"\n          });\n          console.log(error.response);\n          console.log(error.response.data);\n        });\n        this.limpiar();\n      }\n    };\n\n    this.componentDidMount = () => {\n      axios.get(url + '/servicio/listarActivos').then(resp => {\n        this.setState({\n          servicios: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      axios.get(url + '/servicioAgendado/listarActivos').then(resp => {\n        this.setState({\n          serviciosAgendados: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      axios.get(url + '/servicioAgendado/listarAgenda?num=3').then(resp => {\n        this.setState({\n          serviciosFull: resp.data\n        });\n      }).catch(error => {\n        console.log(error);\n        this.cargarFecha();\n      }); // axios.get(url + '/servicioAgendado/ListarServiciosMedio?num=2').then((resp) => {\n      //     this.setState({\n      //         serviciosMedios: resp.data,\n      //     });\n      // }).catch((error) => {\n      //     console.log(error);\n      // }\n      //)\n    };\n\n    this.cargarFecha = () => {\n      const today = new Date();\n      const fechasAntes = [{\n        before: today\n      }];\n      const fechas = fechasAntes;\n      this.state.serviciosFull.forEach(e => {\n        fechas.push(new Date(e));\n      });\n      this.setState({\n        fechasConvertidas: fechas\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        idSer: event.target.value\n      });\n    };\n\n    this.changeHorario = event => {\n      this.setState({\n        horarioElegido: event.target.value\n      });\n    };\n\n    this.handleDayClick = (day, {\n      selected,\n      disabled\n    }) => {\n      if (disabled) {\n        return;\n      }\n\n      if (selected) {\n        this.setState({\n          selectedDay: undefined\n        });\n        return;\n      } else {\n        this.setState({\n          selectedDay: day\n        });\n        this.llamarDia(day);\n      }\n    };\n\n    this.llamarDia = day => {\n      axios.get(url + '/servicioAgendado/llamarServicioDia?dia=' + day.toLocaleDateString()).then(resp => {\n        this.setState({\n          servicioDia: resp.data\n        });\n        this.borrarHoras(resp.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.borrarHoras = servicioDia => {\n      let array = this.state.horarios;\n      let idServicio = this.state.idSer;\n\n      if (idServicio === '3') {\n        array = [{\n          hora: '9 hrs'\n        }];\n      } else if (idServicio === '2') {\n        array = [{\n          hora: \"9 hrs\"\n        }, {\n          hora: \"10 hrs\"\n        }, {\n          hora: \"11 hrs\"\n        }, {\n          hora: \"12 hrs\"\n        }, {\n          hora: \"14 hrs\"\n        }];\n      }\n\n      servicioDia.forEach(e => {\n        if (e.servicioId === 1) {\n          let h = e.horaElegida;\n          array = array.filter(element => element.hora !== h);\n        } else if (e.servicioId === 2) {\n          let hr = e.horaElegida;\n          let number = hr.match(/\\d+/)[0];\n          let n = Number(number);\n          let hr1 = n + 1 + ' hrs';\n          let hr2 = n + 2 + ' hrs';\n          let hr3 = n + 3 + ' hrs';\n          array = array.filter(element => element.hora !== hr);\n          array = array.filter(element => element.hora !== hr1);\n          array = array.filter(element => element.hora !== hr2);\n          array = array.filter(element => element.hora !== hr3);\n\n          if (n >= 10 && n <= 12) {\n            let neg1 = n - 1 + ' hrs';\n            let neg2 = n - 2 + ' hrs';\n            let neg3 = n - 3 + ' hrs';\n            array = array.filter(element => element.hora !== neg1);\n            array = array.filter(element => element.hora !== neg2);\n            array = array.filter(element => element.hora !== neg3);\n          }\n        }\n\n        if (servicioDia.length >= 1) {\n          if (idServicio === '2') {\n            let hr = e.horaElegida; // '11 hrs'\n\n            let number = hr.match(/\\d+/)[0]; //'11'\n\n            let n = Number(number); // 11 int\n\n            let neg1 = n - 1 + ' hrs'; // let neg1 = 11 - 1 \n\n            let neg2 = n - 2 + ' hrs';\n            let neg3 = n - 3 + ' hrs';\n            array = array.filter(element => element.hora !== neg1);\n            array = array.filter(element => element.hora !== neg2);\n            array = array.filter(element => element.hora !== neg3);\n          }\n        }\n      });\n      this.setState({\n        horas: array\n      });\n    };\n\n    this.state = {\n      diaElegido: '',\n      servicios: [],\n      servicioElegido: \"\",\n      mensaje: \"\",\n      idCli: 0,\n      serviciosFull: [],\n      serviciosMedios: [],\n      serviciosBasicos: [],\n      selectedDay: \"\",\n      serviciosAgendados: [],\n      fechasConvertidas: {},\n      idSer: -1,\n      mensajeError: \"\",\n      mensajeSuccess: \"\",\n      horas: [],\n      horarios: [{\n        hora: \"9 hrs\"\n      }, {\n        hora: \"10 hrs\"\n      }, {\n        hora: \"11 hrs\"\n      }, {\n        hora: \"12 hrs\"\n      }, {\n        hora: \"14 hrs\"\n      }, {\n        hora: \"15 hrs\"\n      }, {\n        hora: \"16 hrs\"\n      }, {\n        hora: \"17 hrs\"\n      }],\n      horarioElegido: \"\",\n      servicioDia: [],\n      errors: {}\n    };\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  limpiar() {\n    this.timer = setInterval(() => {\n      window.location.reload(1);\n    }, 2000);\n  }\n\n  handleValidation() {\n    let errors = {};\n    let formIsValid = true; //idSer\n\n    if (this.state.idSer === -1) {\n      formIsValid = false;\n      errors[\"idSer\"] = \"Debe ingresar el servicio que desea agendar\";\n    } //fechaElegida\n\n\n    if (this.state.selectedDay === \"\") {\n      formIsValid = false;\n      errors[\"fechaElegida\"] = \"Debe ingresar la fecha en la que desea agendarse\";\n    } //horarioElegido\n\n\n    if (this.state.horarioElegido === \"\") {\n      formIsValid = false;\n      errors[\"horarioElegido\"] = \"Debe ingresar el horario en el que desea agendarse\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  render() {\n    if (localStorage.getItem('usuario') === null) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: window.location.href = '/Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 20\n      }, this);\n    } else //var holydays = [new Date('08/22/2021'), new Date('08/25/2021'), new Date('08/29/2021')];       \n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Agende su servicio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            id: \"labeles\",\n            className: \"lead\",\n            children: \"Agende su servicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"red\"\n            },\n            children: this.state.errors[\"idSer\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"idSer\",\n              name: \"idSer\",\n              onChange: this.handleChange,\n              className: \"form-control\",\n              placeholderText: \"Servicios\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: true,\n                selected: true,\n                children: \"Eliga un servicio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 33\n              }, this), this.state.servicios.map(servicioElegido => /*#__PURE__*/_jsxDEV(\"option\", {\n                name: \"servicio\",\n                value: servicioElegido.id,\n                selectedValue: servicioElegido,\n                children: servicioElegido.nombre\n              }, servicioElegido, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 37\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.submit,\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"red\"\n                },\n                children: this.state.errors[\"fechaElegida\"]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(DayPicker, {\n                  id: \"fechaElegida\",\n                  name: \"fechaElegida\",\n                  onDayClick: this.handleDayClick,\n                  selectedDays: this.state.selectedDay,\n                  disabledDays: this.state.fechasConvertidas\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 37\n                }, this), this.state.selectedDay ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: this.state.selectedDay.toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Elija un d\\xEDa.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                id: \"labeles\",\n                className: \"lead\",\n                children: \"Ingrese su horario\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"red\"\n                },\n                children: this.state.errors[\"horarioElegido\"]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: this.changeHorario,\n                id: \"horarioElegido\",\n                name: \"horarioElegido\",\n                className: \"form-control\",\n                placeholderText: \"Horarios\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  disabled: true,\n                  selected: true,\n                  children: \"Eliga un horario\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 37\n                }, this), this.state.horas.map(horario => /*#__PURE__*/_jsxDEV(\"option\", {\n                  name: \"horario\",\n                  value: horario.hora,\n                  selectedValue: horario,\n                  children: horario.hora\n                }, horario, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 41\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ReactBoostrap.Button, {\n                type: \"submit\",\n                variant: \"success\",\n                className: \"fadeIn fourth\",\n                value: \"Crear Servicio\",\n                onClick: this.manejadorBoton,\n                children: \"Agendar Servicio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 29\n            }, this), this.state.mensajeSuccess === \"ok\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"alert alert-success\",\n              role: \"alert\",\n              children: this.state.mensaje\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 33\n            }, this) : this.state.mensajeError === \"error\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"alert alert-danger\",\n              role: \"alert\",\n              children: this.state.mensaje\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 37\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/emili/Desktop/proyecto car clean 01 09 2021/proyecto/src/components/Agenda/AgendarServicio.js"],"names":["React","Component","ReactBoostrap","axios","url","DayPicker","Redirect","AgendarServicio","constructor","props","manejadorBoton","e","preventDefault","console","log","state","idSer","localStorage","getItem","selectedDay","toLocaleDateString","horarioElegido","handleValidation","post","then","response","status","setState","mensaje","data","mensajeSuccess","catch","error","message","mensajeError","limpiar","componentDidMount","get","resp","servicios","serviciosAgendados","serviciosFull","cargarFecha","today","Date","fechasAntes","before","fechas","forEach","push","fechasConvertidas","handleChange","event","target","value","changeHorario","handleDayClick","day","selected","disabled","undefined","llamarDia","servicioDia","borrarHoras","array","horarios","idServicio","hora","servicioId","h","horaElegida","filter","element","hr","number","match","n","Number","hr1","hr2","hr3","neg1","neg2","neg3","length","horas","diaElegido","servicioElegido","idCli","serviciosMedios","serviciosBasicos","errors","componentWillUnmount","clearInterval","timer","setInterval","window","location","reload","formIsValid","render","href","color","map","id","nombre","submit","horario"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as ReactBoostrap from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport { url } from '../API.js';\r\nimport DayPicker from 'react-day-picker';\r\nimport 'react-day-picker/lib/style.css';\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\n\r\nexport default class AgendarServicio extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            diaElegido: '',\r\n            servicios: [],\r\n            servicioElegido: \"\",\r\n            mensaje: \"\",\r\n            idCli: 0,\r\n            serviciosFull: [],\r\n            serviciosMedios: [],\r\n            serviciosBasicos: [],\r\n            selectedDay: \"\",\r\n            serviciosAgendados: [],\r\n            fechasConvertidas: {},\r\n            idSer: (-1),\r\n            mensajeError: \"\",\r\n            mensajeSuccess: \"\",\r\n            horas: [],\r\n            horarios: [\r\n                { hora: \"9 hrs\" },\r\n                { hora: \"10 hrs\" },\r\n                { hora: \"11 hrs\" },\r\n                { hora: \"12 hrs\" },\r\n                { hora: \"14 hrs\" },\r\n                { hora: \"15 hrs\" },\r\n                { hora: \"16 hrs\" },\r\n                { hora: \"17 hrs\" },\r\n            ],\r\n            horarioElegido: \"\",\r\n            servicioDia: [],\r\n            errors: {},\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n\r\n        clearInterval(this.timer);\r\n    }\r\n    limpiar() {\r\n        this.timer = setInterval(() => {\r\n            window.location.reload(1);        \r\n        }\r\n            , 2000);\r\n    }\r\n\r\n    handleValidation() {\r\n\r\n        let errors = {};\r\n        let formIsValid = true;\r\n\r\n        //idSer\r\n        if (this.state.idSer === -1) {\r\n            formIsValid = false;\r\n            errors[\"idSer\"] = \"Debe ingresar el servicio que desea agendar\";\r\n        }\r\n\r\n        //fechaElegida\r\n        if (this.state.selectedDay === \"\") {\r\n            formIsValid = false;\r\n            errors[\"fechaElegida\"] = \"Debe ingresar la fecha en la que desea agendarse\";\r\n        }\r\n\r\n        //horarioElegido\r\n        if (this.state.horarioElegido === \"\") {\r\n            formIsValid = false;\r\n            errors[\"horarioElegido\"] = \"Debe ingresar el horario en el que desea agendarse\";\r\n        }\r\n\r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n    }\r\n\r\n    manejadorBoton = (e) => {\r\n        e.preventDefault(); \r\n        console.log( this.state.idSer);   \r\n        console.log(localStorage.getItem('usuario'));\r\n        console.log(this.state.selectedDay.toLocaleDateString());\r\n        console.log(this.state.horarioElegido);    \r\n        if(this.state.idSer>=0){\r\n            console.log(\"es mayor\");\r\n        }else{\r\n            console.log(\"es menor\");\r\n        }\r\n        if (this.handleValidation()) {\r\n            axios.post(url + '/servicioAgendado/insertar?idSer=' + this.state.idSer +\r\n             \"&idUsu=\" + localStorage.getItem('usuario')\r\n                + \"&fechaElegida=\" + this.state.selectedDay.toLocaleDateString() +\r\n                 \"&horarioElegido=\" + this.state.horarioElegido)\r\n                .then(response => {\r\n                    console.log(\"entre al 200\");\r\n                    if (response.status >= 200 && response.status <= 205) {\r\n                        this.setState({\r\n                            mensaje: response.data,\r\n                            mensajeSuccess: \"ok\",                     \r\n                        });\r\n                    }\r\n                }).catch(error => {\r\n                    console.log(\"entre al 500\");\r\n                    console.log( error.response);\r\n                    console.log( error.response.data);\r\n                    console.log( error.response.data.message);\r\n                    this.setState({\r\n                        mensaje: error.response.data,\r\n                        mensajeError: \"error\"\r\n                    });\r\n                    console.log(error.response)\r\n                    console.log(error.response.data)\r\n                })\r\n                this.limpiar();\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        axios.get(url + '/servicio/listarActivos').then((resp) => {\r\n            this.setState({\r\n                servicios: resp.data,\r\n            });\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n        axios.get(url + '/servicioAgendado/listarActivos').then((resp) => {\r\n            this.setState({\r\n                serviciosAgendados: resp.data,\r\n            });\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n        axios.get(url + '/servicioAgendado/listarAgenda?num=3').then((resp) => {\r\n            this.setState({\r\n                serviciosFull: resp.data,\r\n            });\r\n         \r\n        }).catch((error) => {\r\n            console.log(error);\r\n            this.cargarFecha()\r\n        }\r\n    \r\n        )\r\n        // axios.get(url + '/servicioAgendado/ListarServiciosMedio?num=2').then((resp) => {\r\n        //     this.setState({\r\n        //         serviciosMedios: resp.data,\r\n        //     });\r\n        // }).catch((error) => {\r\n        //     console.log(error);\r\n        // }\r\n        //)\r\n    };\r\n\r\n\r\n\r\n\r\n    cargarFecha = () => {\r\n        const today = new Date();\r\n        const fechasAntes = [{ before: today }];\r\n        const fechas = fechasAntes;\r\n        this.state.serviciosFull.forEach(e => {\r\n            fechas.push(new Date(e))\r\n        });\r\n        this.setState({\r\n            fechasConvertidas: fechas,\r\n        })\r\n    }\r\n\r\n    handleChange = event => {\r\n        this.setState({\r\n            idSer: event.target.value,\r\n        });\r\n    }\r\n\r\n    changeHorario = event => {\r\n        this.setState({\r\n            horarioElegido: event.target.value,\r\n        });\r\n    }\r\n\r\n    handleDayClick = (day, { selected, disabled }) => {\r\n        if (disabled) {\r\n            return;\r\n        }\r\n        if (selected) {\r\n            this.setState({ selectedDay: undefined });\r\n            return;\r\n        } else {\r\n            this.setState({\r\n                selectedDay: day,\r\n            });\r\n            this.llamarDia(day);\r\n        }\r\n\r\n    }\r\n\r\n    llamarDia = (day) => {\r\n        axios.get(url + '/servicioAgendado/llamarServicioDia?dia=' + day.toLocaleDateString()).then((resp) => {\r\n            this.setState({\r\n                servicioDia: resp.data,\r\n            });\r\n            this.borrarHoras(resp.data);\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        }\r\n        )\r\n    }\r\n\r\n    borrarHoras = (servicioDia) => {\r\n        let array = this.state.horarios;\r\n        let idServicio = this.state.idSer;\r\n        if (idServicio === '3') {\r\n            array = [{ hora: '9 hrs' }]\r\n        } else if (idServicio === '2') {\r\n            array = [\r\n                { hora: \"9 hrs\" },\r\n                { hora: \"10 hrs\" },\r\n                { hora: \"11 hrs\" },\r\n                { hora: \"12 hrs\" },\r\n                { hora: \"14 hrs\" }];\r\n        }\r\n        servicioDia.forEach(e => {\r\n            if (e.servicioId === 1) {\r\n                let h = e.horaElegida;\r\n                array = array.filter(element => element.hora !== h);\r\n            } else if (e.servicioId === 2) {\r\n                let hr = e.horaElegida;\r\n                let number = hr.match(/\\d+/)[0]\r\n                let n = Number(number);\r\n                let hr1 = n + 1 + ' hrs';\r\n                let hr2 = n + 2 + ' hrs';\r\n                let hr3 = n + 3 + ' hrs';\r\n                array = array.filter(element => element.hora !== hr);\r\n                array = array.filter(element => element.hora !== hr1);\r\n                array = array.filter(element => element.hora !== hr2);\r\n                array = array.filter(element => element.hora !== hr3);\r\n                if (n >= 10 && n <= 12) {\r\n                    let neg1 = n - 1 + ' hrs';\r\n                    let neg2 = n - 2 + ' hrs';\r\n                    let neg3 = n - 3 + ' hrs';\r\n                    array = array.filter(element => element.hora !== neg1);\r\n                    array = array.filter(element => element.hora !== neg2);\r\n                    array = array.filter(element => element.hora !== neg3);\r\n                }\r\n            }\r\n            if (servicioDia.length >= 1) {\r\n                if (idServicio === '2') {\r\n                    let hr = e.horaElegida;// '11 hrs'\r\n                    let number = hr.match(/\\d+/)[0] //'11'\r\n                    let n = Number(number); // 11 int\r\n                    let neg1 = n - 1 + ' hrs'; // let neg1 = 11 - 1 \r\n                    let neg2 = n - 2 + ' hrs';\r\n                    let neg3 = n - 3 + ' hrs';\r\n                    array = array.filter(element => element.hora !== neg1);\r\n                    array = array.filter(element => element.hora !== neg2);\r\n                    array = array.filter(element => element.hora !== neg3);\r\n                }\r\n            }\r\n        });\r\n        this.setState({\r\n            horas: array,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (localStorage.getItem('usuario') === null) {\r\n            return <Redirect to={window.location.href = '/Login'} />\r\n        } else\r\n            //var holydays = [new Date('08/22/2021'), new Date('08/25/2021'), new Date('08/29/2021')];       \r\n            return (\r\n                <div>\r\n                    <h1>Agende su servicio</h1>\r\n                    <div className=\"container\">\r\n                        <label id=\"labeles\" className=\"lead\" >Agende su servicio</label>\r\n                        <span style={{ color: \"red\" }}>{this.state.errors[\"idSer\"]}</span>\r\n                        <div className=\"\">\r\n                            <select\r\n                                id='idSer'\r\n                                name='idSer'\r\n                                onChange={this.handleChange}\r\n                                className=\"form-control\"\r\n                                placeholderText=\"Servicios\">\r\n                                <option disabled selected >Eliga un servicio</option>\r\n                                {this.state.servicios.map(servicioElegido => (\r\n                                    <option\r\n                                        key={servicioElegido}\r\n                                        name=\"servicio\"\r\n                                        value={servicioElegido.id}\r\n                                        selectedValue={servicioElegido}\r\n                                    >{servicioElegido.nombre}</option>\r\n                                ))}</select>\r\n\r\n                            <br />\r\n                            <form onSubmit={this.submit}>\r\n                                <br />\r\n                                <span style={{ color: \"red\" }}>{this.state.errors[\"fechaElegida\"]}</span>\r\n                                <div>\r\n                                    <DayPicker\r\n                                        id='fechaElegida'\r\n                                        name='fechaElegida'\r\n                                        onDayClick={this.handleDayClick}\r\n                                        selectedDays={this.state.selectedDay}\r\n                                        disabledDays={this.state.fechasConvertidas}\r\n                                    />\r\n                                    {this.state.selectedDay ? (\r\n                                        <p>{this.state.selectedDay.toLocaleDateString()}</p>\r\n                                    ) : (\r\n                                        <p>Elija un d√≠a.</p>\r\n                                    )}\r\n                                </div>\r\n                                <br />\r\n                                <label id=\"labeles\" className=\"lead\" >Ingrese su horario</label>\r\n                                <span style={{ color: \"red\" }}>{this.state.errors[\"horarioElegido\"]}</span>\r\n                                <select onChange={this.changeHorario}\r\n                                    id='horarioElegido'\r\n                                    name='horarioElegido'\r\n                                    className=\"form-control\"\r\n                                    placeholderText=\"Horarios\">\r\n                                    <option disabled selected >Eliga un horario</option>\r\n                                    {this.state.horas.map(horario => (\r\n                                        <option\r\n                                            key={horario}\r\n                                            name=\"horario\"\r\n                                            value={horario.hora}\r\n                                            selectedValue={horario}\r\n                                        >{horario.hora}</option>\r\n                                    ))}\r\n                                </select>\r\n                                <br />\r\n                                <ReactBoostrap.Button type=\"submit\" variant=\"success\" className=\"fadeIn fourth\" value=\"Crear Servicio\"\r\n                                    onClick={this.manejadorBoton}>Agendar Servicio</ReactBoostrap.Button >\r\n                            </form>\r\n\r\n                            {this.state.mensajeSuccess === \"ok\" ?\r\n                                <div class=\"alert alert-success\" role=\"alert\">\r\n                                    {this.state.mensaje}\r\n                                </div> : (this.state.mensajeError === \"error\") ?\r\n                                    <div class=\"alert alert-danger\" role=\"alert\">\r\n                                        {this.state.mensaje}\r\n                                    </div> : null\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}